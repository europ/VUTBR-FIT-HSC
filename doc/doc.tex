\documentclass[11pt,a4paper]{article}

\usepackage[left=2cm,text={17cm,24cm},top=3cm]{geometry}
\usepackage[slovak]{babel}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}

\usepackage{url}
\usepackage{tikz}
\usepackage{float}
\usepackage{xcolor}
\usepackage{siunitx}
\usepackage{listings}
\usepackage{csquotes}
\usepackage{hyperref}
\usepackage{textcomp}
\usepackage{breakurl}
\usepackage{etoolbox}
\usepackage{graphicx}
\usepackage{multicol}
\usepackage{multirow}
\usepackage{enumerate}
\usepackage{supertabular}
\usepackage[titles]{tocloft}

\def\UrlBreaks{\do\/\do-}
\newcommand{\red}[1]{\textcolor{red}{#1}}
\newcommand{\TODO}{\textbf{\textcolor{red}{TODO}}}
\newcommand{\tilda}{\raisebox{0.5ex}{\texttildelow}}
\renewcommand{\cftdot}{}

\graphicspath{{img/}}
\setlength\parindent{0pt}
\patchcmd{\thebibliography}{\section*{\refname}}{}{}{}

\begin{document}

\begin{titlepage}
    \begin{center}
        \Huge
        \textsc{
            Fakulta informačních technologií\\
            Vysoké učení technické v~Brně
        }
        \vspace{80px}
        \begin{figure}[!h]
            \centering
            \includegraphics[scale=0.3]{vutbr-fit-logo.eps}
        \end{figure}
        \\[15mm]
        \Huge{
            \textbf{
                HSC
            }
        }
        \\[1.5mm]
        \huge{
            \textbf{
                Hardware/Software Codesign
            }
        }
        \\[2.5em]
        \LARGE{
            \textbf{
                Vstavaný systém pre filtráciu a segmentáciu obrazu
            }
        }
        \vfill
    \end{center}
        \Large{
            Adrián Tóth (xtotha01)\hfill \today
        }
\end{titlepage}

\setlength{\parskip}{0pt}
\hypersetup{hidelinks}\tableofcontents
\setlength{\parskip}{0pt}

\newpage
\section{CPU}

Profilovanie CPU časti projektu bolo vykonané pomocou programu \textit{GNU gprof}\footnote{\href{https://sourceware.org/binutils/docs/gprof/}{sourceware.org/binutils/docs/gprof}} verzie \textit{2.26.1}. Desať profilovacích výsledkov bolo nameraných pomocou \textit{návodu z dokumentácie}\footnote{\href{https://sourceware.org/binutils/docs/gprof/Sampling-Error.html}{sourceware.org/binutils/docs/gprof/Sampling-Error.html}} na základe čoho bol vo výsledku jeden sumárny výpis profilovacích hodnôt (priemer desiatich profilovaní).\\

\begin{table}[H]
  \begin{center}
    \begin{tabular}{l|c}
        \multicolumn{1}{c|}{\textbf{Názov}} & \multicolumn{1}{c}{\textbf{Percento času}}\\
        \hline
        \textit{median}            & 62.02 \\
        \textit{gen\_pixel}        & 10.00 \\
        \textit{clip\_window}      & 8.74 \\
        \textit{pixel\_processing} & 5.34 \\
        \textit{shift\_window}     & 4.46 \\
        \textit{buffer}            & 3.66 \\
        \textit{system\_input}     & 2.80 \\
        \textit{thresholding}      & 0.95 \\
        \textit{main}              & 0.79 \\
        \textit{update\_base\_pos} & 0.11 \\
        \textit{histogram\_clean}  & 0.00 \\
        \textit{otsu}              & 0.00 \\
    \end{tabular}
    \caption{Výsledky desiatich profilovaní pomocou \textit{gprof}.}
    \label{tab:gprof}
  \end{center}
\end{table}

\begin{figure}[H]
    \centering
    \includegraphics[scale=0.6]{graph.eps}
    \caption{Graf zobrazujúci namerané hodnoty z tabuľky \ref{tab:gprof}.}
    \label{fig:graf}
\end{figure}

\newpage
\section{MCU}

Profilovanie MCU bolo vykonané pomocou makra \texttt{\#define PROFILE}. Výsledky sú zobrazené v tabuľke~\ref{tab:process}.

\begin{table}[H]
  \begin{center}
    \begin{tabular}{r|l}
        \multicolumn{1}{c|}{\textbf{Spracovaná časť}} & \multicolumn{1}{c}{\textbf{Čas spracovania}}\\
        \hline
        pixel & $183 \ \mu s$\\
        rámec & $14.0544 \ s$\\
    \end{tabular}
    \caption{Spracovanie určitých častí a ich trvanie.}
    \label{tab:process}
  \end{center}
\end{table}

Implementácia MCU časti je upravená tak aby spracovala 5 rámcov -- rámce číslo 100, 200, 300, 400, 500. Napriek tomu, že sa spracuje len 5 rámcov, doba spracovania piatich rámcov trvá $70.272 \ s$ ($1min \ 10s \ 272ms$). Kebyže implementácia MCU časti nie je upravená -- spracuje sa každý rámec, tak by spracovanie trvalo $7027.2 \ s$ ($1h \ 57min \ 7s \ 200ms$).

\section{FPGA}

Vlastnosti komponenty pre filtráciu a segmentáciu obrazu:

\begin{itemize}
    \item V jadre modulu pre \textit{filter} je \textit{main} zreťazený (pipeline enabled) s inicializačným intervalom~4
    \item Cyklus označený ako \textit{Linit} je rozbalený (unroll enabled)
    \item Cyklus označený ako \textit{L2} je rozbalený (unroll enabled)
    \item Cyklus označený ako \textit{L1a} je rozbalený (unroll enabled)
    \item Cyklus označený ako \textit{L1b} je rozbalený (unroll enabled)
    \item Latencia obvodu je 4
\end{itemize}

Využitie zdrojov je zobrazené v tabuľke \ref{tab:fpga_resources}.

\begin{table}[H]
  \begin{center}
    \begin{tabular}{l|l}
        Number of Slice Flip Flops & 492 \hspace{1.65mm} out of 1,536 (32\%) \\
        Number of 4 input LUTs     & 1,178 out of 1,536 (76\%) \\
        Number of occupied Slices  & 766 \hspace{1.65mm} out of 768 \hspace{1.65mm} (99\%)   \\
    \end{tabular}
    \caption{Množstvo spotrebovaných zdrojov FPGA čipu.}
    \label{tab:fpga_resources}
  \end{center}
\end{table}

\section{Porovnanie vlastností SW a SW-HW}

Porovnanie jednotlivých vlastností SW a SW-HW je zobrazené v tabuľke \ref{tab:compare}.

\begin{table}[H]
  \begin{center}
    \begin{tabular}{r|l|l}
        & \multicolumn{1}{c|}{\textbf{SW}} & \multicolumn{1}{c}{\textbf{SW-HW}}\\
        \hline
        pixel & $183 \ \mu s$ & \TODO\\
        rámec & $14.0544 \ s$ & \TODO\\
    \end{tabular}
    \caption{Spracovanie určitých častí a ich trvanie.}
    \label{tab:compare}
  \end{center}
\end{table}

\section{Zhrnutie}


%\newpage
%\section{Literatúra}
%\bibliographystyle{slovakiso}
%\begin{flushleft}
%    \bibliography{quotation}
%\end{flushleft}

\end{document}
